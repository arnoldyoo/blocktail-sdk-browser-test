<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="./lib/asmcrypto.js"></script>
    <script src="./lib/blocktrail-sdk-with-backup-generator.js"></script>
    <script src="./lib/blocktrail-sdk-full.js"></script>
    
  </head>
  <body>

    <script>
      console.log("123456789 Satoshi to BTC: ", window.blocktrailSDK.toBTC(123456789));

      var client = window.blocktrailSDK.BlocktrailSDK({
        apiKey: "07bb2fc43bcad8fddb4d19e91214a78eaad5f534", 
        apiSecret: "7e144ad519f25830847e4ead4d06c6012817dcf0", 
        network: "tBTC", 
        testnet: true});
      
      var wallet = undefined;
      // client.createNewWallet("arnoldyoo3", "790102",function(err, wallet, backupInfo) {
      //   if(err) {
      //     console.log('err : ', err);
      //   } else {
      //     console.log(wallet);
      //     console.log(backupInfo);
      //     var wallet = wallet;
      //   }
      // });
      client.initWallet("arnoldyoo2", "790102", function(err, wallet) {
        if(err) {
          console.log(err);
        } else {
          
          wallet.getNewAddress(function(err, address) {
            console.log('arnoldyoo2 address : ', address);
          });

          wallet.getBalance( 
              function(err, confirmedBalance, unconfirmedBalance) {
                  console.log('arnoldyoo2 Balance: ', window.blocktrailSDK.toBTC(confirmedBalance));
                  console.log('arnoldyoo2 Unconfirmed Balance: ', window.blocktrailSDK.toBTC(unconfirmedBalance));
              }
          );
          value = window.blocktrailSDK.toSatoshi(1.1);
          console.log(wallet);
          
          wallet.pay({'2MvmZAcqzZqsiwge1fb8qQFYowxChRX8ZHM': value}, null, false, true, window.blocktrailSDK.Wallet.FEE_STRATEGY_BASE_FEE,
          function(err, result) {
            if(err) {
              console.log(err);
            } else {
              console.log('pay result : ', result)
            }
          });
        }
      });

      client.initWallet("arnoldyoo3", "790102", function(err, wallet) {
        if(err) {
          console.log(err);
        } else {
          
          wallet.getNewAddress(function(err, address) {
            console.log('arnoldyoo3 address : ', address);
          });

          wallet.getBalance(
              function(err, confirmedBalance, unconfirmedBalance) {
                  console.log('arnoldyoo3 Balance: ', window.blocktrailSDK.toBTC(confirmedBalance));
                  console.log('arnoldyoo3 Unconfirmed Balance: ', window.blocktrailSDK.toBTC(unconfirmedBalance));
              }
          );
        }
      });
      
    </script>
  
  </body>
</html>